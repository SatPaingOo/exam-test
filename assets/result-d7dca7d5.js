import{a as e,r as s,j as a,L as r}from"./index-b67da5c6.js";import{C as l,B as i}from"./Card-a8b9282e.js";const c=()=>{var c;const{attemptId:t}=e(),n=s.useMemo(()=>{try{const e=sessionStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return null}},[t]);if(!n)return a.jsx("div",{className:"quiz-result quiz-result--missing",children:a.jsx("div",{className:"container",children:a.jsxs(l,{hover:!1,children:[a.jsx("h1",{className:"quiz-result__title",children:"Result not found"}),a.jsx("p",{className:"quiz-result__subtitle",children:"The attempt expired or was cleared from this device."}),a.jsx("div",{className:"quiz-actions",children:a.jsx(r,{to:"/exams",children:a.jsx(i,{variant:"primary",children:"Browse Exams"})})})]})})});const{track:d,paper:m,trackLabel:o,paperLabel:u,papersUsed:p=[],paperOptions:x=[],summary:h,countRequested:j}=n,N=o||(null==(c=null==d?void 0:d.toUpperCase)?void 0:c.call(d))||"Practice",_=u||m||"Session",v=h||{score:0,correct:0,total:0,details:[]},y=Array.isArray(p)?[...new Set(p)]:[],g=s.useMemo(()=>new Map(x.map(e=>[e.id,e.label])),[x]),b=y.map(e=>g.get(e)||e);return a.jsxs("div",{className:"quiz-result",children:[a.jsx("section",{className:"page-hero",children:a.jsxs("div",{className:"container",children:[a.jsx("div",{className:"page-hero__category",children:a.jsx("span",{className:`category-badge category-badge--${d}`,children:null==d?void 0:d.toUpperCase()})}),a.jsx("p",{className:"page-hero__eyebrow",children:"Attempt Summary"}),a.jsx("h1",{className:"page-hero__title",children:N}),a.jsx("p",{className:"page-hero__subtitle",children:_})]})}),a.jsx("section",{className:"quiz-result__content",children:a.jsx("div",{className:"container",children:a.jsxs(l,{hover:!1,className:"quiz-result__card",children:[a.jsxs("div",{className:"quiz-result__overview",children:[a.jsxs("div",{className:"quiz-result__metric",children:[a.jsx("span",{className:"label",children:"Score"}),a.jsxs("span",{className:"value",children:[v.score,"%"]})]}),a.jsxs("div",{className:"quiz-result__metric",children:[a.jsx("span",{className:"label",children:"Correct"}),a.jsxs("span",{className:"value",children:[v.correct," / ",v.total]})]}),a.jsxs("div",{className:"quiz-result__metric",children:[a.jsx("span",{className:"label",children:"Questions"}),a.jsx("span",{className:"value",children:v.total})]}),j?a.jsxs("div",{className:"quiz-result__metric",children:[a.jsx("span",{className:"label",children:"Requested"}),a.jsx("span",{className:"value",children:j})]}):null,y.length>1?a.jsxs("div",{className:"quiz-result__metric",children:[a.jsx("span",{className:"label",children:"Papers Mixed"}),a.jsx("span",{className:"value",children:y.length})]}):null]}),b.length?a.jsxs("div",{className:"quiz-result__papers",children:[a.jsx("span",{className:"label",children:"Papers Included"}),a.jsx("div",{className:"quiz-result__paper-tags",children:b.map(e=>a.jsx("span",{className:"quiz-result__paper-tag",children:e},e))})]}):null,a.jsx("div",{className:"quiz-result__details",children:v.details.map(e=>a.jsxs("div",{className:"quiz-result__item "+(e.isCorrect?"quiz-result__item--correct":"quiz-result__item--incorrect"),children:[a.jsxs("div",{className:"question-id",children:["Q",e.id]}),a.jsxs("div",{className:"question-text",children:[a.jsx("span",{className:"label",children:"Question"}),a.jsx("span",{className:"value",children:e.question||"(Question text unavailable)"})]}),a.jsxs("div",{className:"answer-summary",children:[a.jsxs("div",{className:"answer-summary__item answer-summary__item--user",children:[a.jsx("span",{className:"answer-summary__label",children:"Your Answer:"}),a.jsx("span",{className:"answer-summary__value",children:e.picked||"Not answered"})]}),a.jsxs("div",{className:"answer-summary__item answer-summary__item--correct",children:[a.jsx("span",{className:"answer-summary__label",children:"Correct Answer:"}),a.jsx("span",{className:"answer-summary__value",children:e.correctAnswer})]})]}),a.jsxs("div",{className:"answers-list",children:[a.jsx("span",{className:"label",children:"Answers"}),a.jsx("ul",{children:(e.answers||[]).map((s,r)=>{let l="object"==typeof s?JSON.stringify(s)+r:String(s)+r,i="";i="object"==typeof s&&null!==s?"string"==typeof s.text&&s.text.length>0?s.text:Array.isArray(s.text)?s.text.filter(e=>"string"==typeof e).join(" "):s.images&&Array.isArray(s.images)||"image"===s.type&&s.source?"[Image Option]":"[Unsupported Option]":"string"==typeof s||"number"==typeof s?s:"[Unsupported Option]";const c=s===e.picked||"object"==typeof s&&s.text===e.picked,t=s===e.correctAnswer||"object"==typeof s&&s.text===e.correctAnswer;return a.jsxs("li",{className:`answer-option${c?" answer-option--picked":""}${t?" answer-option--correct":""}`,children:[a.jsx("span",{children:i}),c&&a.jsx("span",{className:"badge badge--picked",children:"Your choice"}),t&&a.jsx("span",{className:"badge badge--correct",children:"Correct"})]},l)})})]})]},e.id))}),a.jsxs("div",{className:"quiz-actions quiz-actions--end",children:[a.jsx(r,{to:`/exams/${d}`,children:a.jsx(i,{variant:"primary",children:"Retry Session"})}),a.jsx(r,{to:"/exams",children:a.jsx(i,{variant:"outline",children:"Back to Exams"})})]})]})})})]})};export{c as default};
